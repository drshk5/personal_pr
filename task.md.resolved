# CRM Industry-Grade Enhancement Plan

## Phase 1: Activity Module Overhaul (Backend)
- [ ] 1.1 Add `strStatus`, `strPriority`, `strCategory`, `bolIsDeleted`, `dtUpdatedOn`, `strUpdatedByGUID`, `dtDueDate`, `strRecurrence` fields to [MstActivity](file:///Users/drshk5/Downloads/crm-dk/crm-backend/Models/Core/CustomerData/MstActivity.cs#3-22) model
- [ ] 1.2 Add `ActivityStatusConstants` and `ActivityPriorityConstants`
- [ ] 1.3 Add `UpdateActivityDto`, `ActivityDetailDto`, `ActivityBulkActionDto`, `ActivityAssignDto`, `TodayTasksDto`, `UpcomingActivityDto` (enhanced)
- [ ] 1.4 Add Update, Delete, Complete, BulkAssign, BulkComplete, BulkDelete, Today, MyActivities endpoints to [ActivitiesController](file:///Users/drshk5/Downloads/crm-dk/crm-backend/Controllers/ActivitiesController.cs#9-84)
- [ ] 1.5 Add `ActivityUpdateDtoValidator`
- [ ] 1.6 Update `MstActivityService` with full CRUD + bulk + status transition logic
- [ ] 1.7 Update `IMstActivityRepository` and `MstActivityRepository` with new queries

## Phase 2: Business Logic Automation (Backend)
- [ ] 2.1 Add `ActivityCompleted` trigger to [WorkflowTriggerConstants](file:///Users/drshk5/Downloads/crm-dk/crm-backend/Constants/WorkflowTriggerConstants.cs#3-12)
- [ ] 2.2 Add `AssignActivity`, `UpdateLeadStatus` actions to [WorkflowActionConstants](file:///Users/drshk5/Downloads/crm-dk/crm-backend/Constants/WorkflowActionConstants.cs#3-12)
- [ ] 2.3 Extend [MstWorkflowService](file:///Users/drshk5/Downloads/crm-dk/crm-backend/Services/CustomerData/MstWorkflowService.cs#12-366) to handle Activity entity triggers
- [ ] 2.4 Implement auto lead-status-change logic on activity completion (Contacted → Qualified flow)
- [ ] 2.5 Add workflow trigger call in Activity complete/create service methods

## Phase 3: Universal Assignment System (Backend)
- [ ] 3.1 Create generic assignment service extending lead assignment pattern to Activities, Accounts, Contacts, Opportunities
- [ ] 3.2 Add bulk-assign endpoints for Accounts, Contacts, Opportunities
- [ ] 3.3 Add role-based data filtering (user sees only own assigned, manager sees team, admin sees all)
- [ ] 3.4 Add `strDataScope` field to user rights/JWT claims lookup

## Phase 4: 360° Account Detail View (Backend)
- [ ] 4.1 Enhance [AccountDetailDto](file:///Users/drshk5/Downloads/crm-dk/crm-backend/DTOs/CustomerData/AccountDtos.cs#41-56) with full related data (contacts with details, opportunities with stages, all activities, assignment info, timeline)
- [ ] 4.2 Add inline edit endpoints for related entities from account context
- [ ] 4.3 Add account timeline endpoint combining all activities/changes

## Phase 5: Dashboard & Notification Enhancements (Backend)
- [ ] 5.1 Add "Today's Tasks" and "My Upcoming Activities" to Dashboard DTOs
- [ ] 5.2 Add real-time notification via SignalR on activity assignment
- [ ] 5.3 Add activity overdue detection logic

## Phase 6: Frontend Enhancements
- [ ] 6.1 Activity Module: Full CRUD page, bulk actions toolbar, status/priority badges
- [ ] 6.2 Activity Module: Calendar/timeline views, today's tasks widget
- [ ] 6.3 Account Detail: 360° view with tabs for contacts, opportunities, activities
- [ ] 6.4 Lead/Account/Contact: Inline assignment UI with user picker
- [ ] 6.5 Dashboard: Add activity widgets (today, overdue, upcoming)
- [ ] 6.6 Role-based UI filtering (show/hide based on user permissions)

## Phase 7: Database Migration
- [ ] 7.1 Write SQL migration for MstActivity table changes
- [ ] 7.2 Seed data for new constants and default workflow rules
